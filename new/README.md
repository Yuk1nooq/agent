# 数据分析智能工具

## 项目简介
这是一个基于Streamlit框架开发的AI数据分析智能工具，能够帮助用户上传数据文件并通过AI助手进行数据分析和可视化。

## 主要功能

### 1. 文件上传功能
- 支持CSV和Excel文件格式
- 文件大小限制：200MB
- 自动解析并显示数据概览

### 2. AI问答系统
- 集成GLM-4-air大语言模型
- 智能理解用户的数据分析需求
- 提供精准的文字回答

### 3. 数据可视化
- 自动生成柱状图、折线图
- 支持表格数据展示
- 根据数据特征智能推荐图表类型

### 4. 多页面设计
- **数据概览页面**：显示上传的数据和基本统计信息
- **文字问答页面**：AI助手回答数据相关问题
- **数据可视化页面**：生成和展示各类图表

## 技术架构

### 前端框架
- **Streamlit**: 快速构建数据应用的Python框架
- **Pandas**: 数据处理和分析
- **Plotly**: 交互式图表生成

### AI模型
- **模型**: GLM-4-air
- **API提供商**: 智谱AI
- **功能**: 数据分析问答和可视化建议

### 核心组件
1. **FileUploader**: 文件上传处理模块
2. **DataProcessor**: 数据解析和预处理模块  
3. **AIAgent**: 智能问答代理
4. **Visualizer**: 数据可视化模块

## 安装和使用

### 环境要求
- Python 3.8+
- 依赖包详见 requirements.txt

### 安装步骤
```bash
pip install -r requirements.txt
```

### 运行应用
```bash
streamlit run app.py
```

### 使用说明

1. **上传数据文件**
   - 点击"Browse files"按钮选择CSV或Excel文件
   - 系统自动解析并显示数据预览

2. **数据分析问答**
   - 在问题输入框中输入你的问题
   - AI助手会根据数据内容提供分析结果
   - 支持的问题类型：
     - 数据概述（如：数据集有多少行多少列？）
     - 统计分析（如：销售额的平均值是多少？）
     - 数据筛选（如：哪个产品销量最高？）

3. **数据可视化**
   - 切换到可视化页面
   - 输入可视化需求（如：生成销售额柱状图）
   - 系统自动生成相应图表

## AI助手能力

### 回答格式
- **纯文字回答**: 简洁明确的分析结论
- **表格数据**: 结构化的数据展示
- **柱状图**: 适合分类数据比较
- **折线图**: 适合趋势数据分析

### 使用提示
- 问题表述要清晰具体
- 可以询问数据的统计特征
- 可以要求生成特定类型的图表
- AI会根据数据特征推荐最合适的可视化方式

## 项目结构
```
├── app.py              # 主应用文件
├── requirements.txt    # 依赖包列表
├── README.md          # 项目说明文档
└── utils/
    ├── file_handler.py    # 文件处理模块
    ├── ai_agent.py        # AI代理模块
    └── visualizer.py      # 可视化模块
```

## 注意事项
- 确保上传的数据文件格式正确
- API密钥已内置，无需额外配置
- 数据处理过程中请耐心等待AI分析
- 建议使用Chrome或Firefox浏览器以获得最佳体验

## 项目完成情况

### ✅ 已实现功能
1. **文件上传功能** - 支持CSV/Excel文件上传，智能编码识别
2. **AI问答系统** - 集成GLM-4-air模型，支持自然语言数据分析
3. **多页面设计** - 四个功能页面：数据概览、AI问答、数据可视化、数据探索
4. **智能可视化** - 根据AI分析自动生成柱状图、折线图、表格
5. **数据探索** - 自动生成数据分布图、相关性热力图
6. **Agent配置** - 严格的JSON格式校验，确保结果准确性

### 🎯 技术特色
- **Smart Agent设计**: 使用指定的prompt模板，确保输出格式统一
- **多格式支持**: 智能识别UTF-8、GBK等编码格式
- **交互式界面**: 美观的UI设计，用户体验友好
- **错误处理**: 完善的异常处理机制，提供详细的错误信息
- **数据安全**: 文件大小限制，数据行数限制，防止系统过载

### 🚀 使用建议
1. 建议使用结构化的数据文件（包含数值列和分类列）
2. 问题描述要清晰具体，AI能更好地理解需求
3. 对于大型数据集，系统会自动截取前10000行进行分析
4. 可以使用示例数据快速体验所有功能

### 🔧 可能的改进方向
1. **增加更多图表类型**: 散点图、饼图、箱线图等
2. **数据预处理功能**: 数据清洗、缺失值处理、异常值检测
3. **报告生成**: 自动生成分析报告，支持PDF导出
4. **数据库连接**: 支持连接MySQL、PostgreSQL等数据库
5. **模型选择**: 支持多种AI模型切换（GPT、Claude等）
6. **协作功能**: 支持多用户协作分析，分享分析结果

### ⚠️ 注意事项
- API密钥已内置，实际部署时请替换为您自己的密钥
- 网络连接需稳定，AI分析依赖外部API调用
- 数据隐私：敏感数据请谨慎使用，数据会发送到AI服务提供商

## 更新日志
- v1.0.0: 初始版本，实现基础数据分析和可视化功能
- v1.0.1: 完善错误处理，优化用户界面，增加示例数据 